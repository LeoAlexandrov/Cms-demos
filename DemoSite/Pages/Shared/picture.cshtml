@model HCms.Content.ViewModels.Fragment

@{
	string id = Model.DomId;
	string src = Model.Props.source;
	string alt = Model.Props.alt;
	int? width = Model.Props.width;
	int? height = Model.Props.height;
	string srcset = Model.Props.srcset;
	string sizes = Model.Props.sizes;
	string floating = Model.Props.floating;

	var sources = Model.Props.sources;
	string floatCls = null;

	switch (floating)
	{
		case "left":
			floatCls = "float-start me-4 mb-4";
			break;
		case "right":
			floatCls = "float-end ms-4 mb-4";
			break;
		case "none":
			floatCls = "float-none mb-4";
			break;
	}

	string extraPictClass = Model.Attributes?.GetValueOrDefault("bootstrap:picture:class");
	string extraFragmentClass = Model.Attributes?.GetValueOrDefault("bootstrap:class");
	string imgClass = string.IsNullOrEmpty(extraFragmentClass) && string.IsNullOrEmpty(floating) && Model.Container != 0 ? "w-100" : null;
}

<picture class="@extraPictClass">
	@if (sources != null)
	{
		foreach (var s in sources)
		{
			<source media="@s.media" srcset="@s.srcset" type="@s.type" />
		}
	}
	<img id="@id" class="@Model.BasicCssClass @floatCls @imgClass @extraFragmentClass" src="@src" alt="@alt" width="@width" height="@height" srcset="@srcset" sizes="@sizes" />
</picture>